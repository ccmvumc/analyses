First get the containers with Podman:
podman pull --platform linux/amd64 docker://bud42/ccmvumc_analyses:v2.1


Use "garjus run" to test locally on a few subjects. Nothing will be uploaded. Use /private/tmp on Mac or Podman cannot find it.

garjus run -p CHAMP -s subject,comma,sep,list -r ~/git/analyses/processors/CHAMP-AXXX/processor.yaml -d /private/tmp/OUTPUTS-CHAMP-AXXX

garjus run -p CHAMP -s 1001,1005,1006,1007,1008 -r ~/git/analyses/processors/CHAMP-A007/processor.yaml -d /private/tmp/OUTPUTS-CHAMP-A007


To reuse inputs:
garjus run -p CHAMP -r ~/git/analyses/processors/CHAMP-A007/processor.yaml -d /private/tmp/OUTPUTS-CHAMP-A007 --reuse



To debug a script in the docker, run the docker in interactive mode and set bash as the entry point.
Use the the same settings garjus would run to mount INPUTS/OUTPUTS and REPO:
docker run -it \
--entrypoint /bin/bash \
-v /tmp/OUTPUTS-CHAMP-AXXX/INPUTS:/INPUTS \
-v /tmp/OUTPUTS-CHAMP-AXXX/OUTPUTS:/OUTPUTS \
-v /Users/boydb1/git/analyses:/REPO bud42/ccmvumc_analyses:v2.1

Then at shell prompt "inside the docker", run the script:
cd /REPRO/src
python -m CHAMP-AXXX

You can keep this shell open, modify the code outside the docker and run the script from the same shell again using the updated code.



Update GitHub and try with GitHub repo to run the procesor.yaml on the main branch:
garjus run -p CHAMP -r ccmvumc/analyses/CHAMP-AXXX -d /tmp/OUTPUTS-CHAMP-AXXX
